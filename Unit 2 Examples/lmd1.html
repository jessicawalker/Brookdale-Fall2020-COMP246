<!DOCTYPE html>
<html lang="en">
<head>
  <title>Let's Make a Deal</title>
  <style>
  table, th, td {
    text-align:center;
    border: 0px solid black;
    width: 300px;
  }

  
  </style>
  <link rel='stylesheet' href='https://use.fontawesome.com/releases/v5.7.0/css/all.css' integrity='sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ' crossorigin='anonymous'>
</head>

<body style='font-family: courier new'>

  <table id='mytable'></table>


  
  <br>
  <button id='opendoor' onclick="openDoor()">Open Door</button>
    <button id='revealdoor' onclick="reveal()">Reveal</button>
  <br><br>
  <div id ='result'></div>
  <script>
    var user_index, car_index;
    
    //create  two-dimensional array; intialize all elements to ' '
    max_doors = 3;
    doors = [];
    
    //create the array and put goats behind all doors
    for (i=0; i < max_doors; i++) {
      doors[i] = 'g';
    }
    
    //place the car
    car_index = Math.floor( Math.random() * 3 ); //0, 1, or 2
    doors[car_index] = 'c';
    
    console.log(doors); //let's see the array
    
    document.getElementById("revealdoor").disabled = true;
    printDoors(doors);


    function openDoor() {
      
      document.getElementById("opendoor").disabled = true;
      document.getElementById("revealdoor").disabled = false;
      
      //user selects door with radio button
      if (document.getElementById("r0").checked)
        user_index = 0;
      else if (document.getElementById("r1").checked)
        user_index = 1;
      else
        user_index = 2;
            
      open_index = Math.floor(Math.random() * 3);
      while (open_index == user_index || open_index == car_index)
        open_index = Math.floor(Math.random() * 3);
      
      console.log('car at: ' + car_index);
      console.log('user choice: ' + user_index);
      console.log('opening... ' + open_index);
      
      //open door
      s = "";
      s = s +"<tr>";
      for (j=0; j < doors.length; j++) {
        if (j == open_index)
          s = s + '<td><i class="fas fa-horse" style="font-size:48px;color:orange"></i></td>';
        else
          s = s + '<td><i class="fas fa-door-closed" style="font-size:48px;color:grey"></i></td>';
      }
      s = s + '</tr>';
      s += '<tr>';
      for (j=0; j < doors.length; j++) {
        checked_s = '';
        if (j == user_index)
          checked_s = ' checked ';
        s += '<td><input type="radio" id="r' + j +'" name="r" value="' + j + '" ' + checked_s + '></td>';
      }
      s += '</tr>';
      
      // fas fa-horse   fa fa-car

      document.getElementById("mytable").innerHTML = s;
      
      //switch or not?
    
      
      
    }
    
    function reveal() {
      //get user's final choice
      if (document.getElementById("r0").checked)
        user_index = 0;
      else if (document.getElementById("r1").checked)
        user_index = 1;
      else
        user_index = 2;      
      
      document.getElementById("revealdoor").disabled = true;
      s = "";
      s = s +"<tr>";
      for (j=0; j < doors.length; j++) {
        if (doors[j] == 'g')
          s = s + '<td><i class="fas fa-horse" style="font-size:48px;color:orange"></i></td>';
        else
          s = s + '<td><i class="fa fa-car" style="font-size:48px;color:blue"></i></td>';
      }
      s = s + '</tr>';
      s += '<tr>';
      for (j=0; j < doors.length; j++) {
        checked_s = '';
        if (j == user_index)
          checked_s = ' checked ';
        s += '<td><input type="radio" id="r"' + j +' name="r" value="' + j + '" ' + checked_s + '></td>';
      }
      s += '</tr>';
      document.getElementById("mytable").innerHTML = s;
      
      if (user_index == car_index)
        document.getElementById("result").innerHTML = 'You won the car!';
      else
        document.getElementById("result").innerHTML = 'Sorry. You got the goat.';
    }

    function printDoors(doors) {
      s = "";
      s = s +"<tr>";
      for (j=0; j < doors.length; j++) {
        s = s + '<td><i class="fas fa-door-closed" style="font-size:48px;color:grey"></i></td>';
      }
      s = s + '</tr>';
      
      s += '<tr>';
      s += '<td><input type="radio" id="r0" name="r" value="0" ></td>';
      s += '<td><input type="radio" id="r1" name="r" value="1" ></td>';
      s += '<td><input type="radio" id="r2" name="r" value="2" checked></td>';
      s += '</tr>';
      
      // fas fa-horse   fa fa-car

      document.getElementById("mytable").innerHTML = s;
    }
    
  </script>
  
  
</body>
</html>
