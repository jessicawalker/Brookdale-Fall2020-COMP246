<!DOCTYPE html>
<html lang="en">
<head>
  <title>Furious Frogs</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>  
</head>

<body>

  <canvas id="myCanvas" width="1000" height="500" style="border:1px solid black;"></canvas><br>
  Initial velocity: <input id="velocity" value="90.5" type="number" min="1" max="300">
  Angle: <input type="number" id="angle" value="80.3" min="0" max="90">
  <button type="button" class="btn btn-danger btn-sm" onclick="fire()">Fire!</button>&nbsp;&nbsp;&nbsp;&nbsp;<div id="msg" style="display:inline;font-size:30px;font-color:blue"></div>
  
  <script>
  var velocity_obj = document.getElementById("velocity");
  var angle_obj = document.getElementById("angle");   
  var msg_obj = document.getElementById("msg"); 

  var canvas = document.getElementById("myCanvas");
  var ctx = canvas.getContext("2d");
  ctx.fillStyle = "#b2ecff";
  ctx.fillRect(0, 0, canvas.width, canvas.height);    
  
  //range of projectile data
  var g = 9.80;                //acceleration due to gravity in meters per second squared
  var t = 0.0;                 //time in seconds
  var tries = 0;
  var id; //interval timer ID

  //to make the lower left corner 0,0, plot (canvas.height - y) instead of y
  //also makes text appear right-side up
    
  //random target location
  var target_distance = Math.random()*canvas.width/2 + canvas.width/2 - 20;
    
  drawBackground();
    
  //draw initial frog
  ctx.fillStyle = 'green';
  ctx.font = "36px Arial"; //font size type
  ctx.fillText('\u{1F438}', 0,canvas.height-0);  //text , x, y    
    
  //points will be black
  ctx.fillStyle = "black";  
    
  function nextPoint() {
    drawBackground();
    
    velocity = velocity_obj.value;
    ar = angle_obj.value * Math.PI/180.0;
    
    //future use
    landing_distance = ( Math.pow(velocity,2) * Math.sin(2 * ar) ) / g;
    
    x = Math.floor(velocity * t * Math.cos(ar));
    y = Math.floor(velocity * t * Math.sin(ar) - 0.5 * g * Math.pow(t, 2) );

    //draw frog
    ctx.font = "36px Arial"; //font size type
    ctx.fillText('\u{1F438}', x, canvas.height-y);  //text , x, y     

    if ( (Math.abs(x+15 - target_distance) < 15) && (y < 5) ) {
      clearInterval(id);
      msg_obj.innerHTML = "You win! It took " + tries + " tries.";
      tries = 0;
      t = 0.0;
      return;
    } else {
      msg_obj.innerHTML = '';
    }
    
    t = t + 0.10; //move ahead in time
    if (x < 0 || y < 0) {
      clearInterval(id);
      t = 0.0;
      console.log('done.');
      return;
    }
  
  }

  function fire() {
    clearInterval(id);
    t=0.0;
    tries++;
    id = setInterval( function() { nextPoint(); } , 20);
  }
    
  function drawBackground() {
    //clear rectangle
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    //blue sky
    ctx.fillStyle = "#b2ecff";
    ctx.fillRect(0, 0, canvas.width, canvas.height);   
    
    //draw target
    ctx.fillStyle = "red";
    ctx.arc(target_distance,canvas.height-0, 10, 0, 2 * Math.PI);
    ctx.fill();    

    //draw clouds
    ctx.fillStyle = "white";
    ctx.font = "120px Arial"; //font size type
    ctx.fillText('\u{2601}', 50,canvas.height-400);  //text , x, y   
    ctx.font = "160px Arial";
    ctx.fillText('\u{2601}', 500,canvas.height-395);  //text , x, y  
    ctx.font = "80px Arial";
    ctx.fillText('\u{2601}', 850,canvas.height-350);  //text , x, y  
  }    
    
  </script>
  
</body>

</html>
